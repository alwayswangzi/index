<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <title>服务器主页</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="stylesheet" href="/index/sdk/sdk.css" />
    <link rel="stylesheet" href="/index/sdk/helper.css" />
    <link rel="stylesheet" href="/index/sdk/iconfont.css" />
    <style>
        html,
        body,
        .app-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="root" class="app-wrapper"></div>
    <script src="/index/sdk/sdk.js"></script>
    <script type="text/javascript">
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) { return pair[1]; }
            }
            return (false);
        }
        (function () {
            let amis = amisRequire('amis/embed');
            // 通过替换下面这个配置来生成不同页面
            let id = getQueryVariable("id");
            let amisJSON = {
                "type": "page",
                "title": "Dashboard",
                "body": [
                    {
                        "type": "iframe",
                        "src": "/dash/",
                        "height": "100%",
                    }
                ],
                "toolbar": [
                    {
                        "type": "alert",
                        "body": [],
                        "level": "info"
                    }
                ],
                "aside": [
                    {
                        "type": "nav",
                        "stacked": true,
                        "links": [
                            {
                                "label": "DashBoard",
                                "to": "/index"
                            },
                            {
                                "label": "Supervisor",
                                "to": "/index?id=1",
                                "activeOn": "this.id == 1"
                            },
                            {
                                "label": "AnyShare",
                                "to": "/index?id=2",
                                "activeOn": "this.id == 2"
                            },
                            {
                                "label": "Picture",
                                "to": "/index?id=3",
                                "activeOn": "this.id == 3"
                            },
                            {
                                "label": "Video",
                                "to": "/video_resource_mgmt/",
                                "activeOn": "this.id == 4"
                            }
                        ],
                        "className": "text-lg font-normal r-2x font-bold b-light"
                    }
                ],
                "messages": {},
                "regions": [
                    "aside",
                    "body"
                ]
            };
            if (id == 1) {
                amisJSON["body"][0]["src"] = "/supervisor/"
            } else if (id == 2) {
                amisJSON["body"][0]["src"] = "/anyShare/index/"
            } else if (id == 3) {
                amisJSON["body"][0]["src"] = "/pic_resource_mgmt/"
            } else if (id == 4) {
                amisJSON["body"][0]["src"] = "/"
            } else if (id == 5) {

            };
            let amisScoped = amis.embed('#root', amisJSON);
        })();
    </script>
</body>

</html>